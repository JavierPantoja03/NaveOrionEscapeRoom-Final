<div class="activity-container">
    <div class="top-controls-container">
        <div class="left-controls">
            <button class="back-btn" (click)="goBack()">Atrás</button>
        </div>
        
    </div>

    <div #imageWrapper class="image-wrapper" [ngClass]="{'full-screen': isFullScreen}" (mousedown)="startDrag($event)" (mousemove)="drag($event)" (mouseup)="stopDrag()" (mouseleave)="stopDrag()">
        <img #mainImage src="assets/img/BOTON 2.jpeg" 
             alt="Imagen principal de la actividad" 
             class="main-image"
             [style.transform]="'scale(' + zoomLevel + ') translate(' + panX + 'px, ' + panY + 'px)'"
             [style.cursor]="isDragging ? 'grabbing' : 'grab'">
    </div>

    <div class="bottom-controls-container">
        <button class="zoom-btn" (click)="zoomIn()">+</button>
        <button class="zoom-btn" (click)="zoomOut()">-</button>
        <button *ngIf="!isFullScreen" class="zoom-btn" (click)="toggleFullScreen()">Pantalla Completa</button>
        <button *ngIf="isFullScreen" class="zoom-btn" (click)="toggleFullScreen()">Salir de Pantalla Completa</button>
    </div>

    <div class="button-container">
        <button class="option-btn" (click)="checkAnswer('M')">M</button>
        <button class="option-btn" (click)="checkAnswer('Q')">Q</button>
        <button class="option-btn" (click)="checkAnswer('O')">O</button>
        <button class="option-btn" (click)="checkAnswer('A')">A</button>
        </div>

    <div *ngIf="showMessage" class="message-box message-box-white">
        <div *ngIf="isCorrect && showSolutionContent">
            <div class="solution-header">La respuesta correcta es la A</div>
            <p>Puedes obtener la respuesta probando cada afirmación y analizando las contradicciones, pero una forma más rápida es notar que si Javier dice la verdad (“Juan miente”), entonces automáticamente las frases de Daniel y Juan son falsas, y para que solo quede una verdad, también la de Roberto debe ser falsa. Eso significa que Roberto mintió cuando dijo que no lo envió, por lo tanto, él es el autor del dibujo.</p>
            <div class="message-buttons">
                <button class="next-btn" (click)="showComputationalExplanation()">¿Por qué es pensamiento computacional?</button>
                <button class="next-btn" (click)="closeMessage()">Cerrar</button>
            </div>
        </div>

        <div *ngIf="!isCorrect">
            <p>Respuesta incorrecta. Inténtalo de nuevo.</p>
            <button class="next-btn" (click)="closeMessage()">Cerrar</button>
        </div>

        <div *ngIf="isCorrect && !showSolutionContent">
            <div class="solution-header">¿Por qué es pensamiento computacional?</div>
            <p>Es pensamiento computacional porque se usa la lógica para analizar declaraciones, identificar contradicciones y aplicar la regla de que solo una afirmación es verdadera. El proceso implica descomponer el problema, evaluar escenarios posibles y descartar opciones hasta llegar a la solución correcta, tal como lo hace un algoritmo paso a paso para resolver un reto.</p>
            <div class="message-buttons">
                <button class="next-btn" (click)="closeMessage()">Cerrar</button>
                <button *ngIf="showActivity3Button" class="next-btn" (click)="goToActivity3()">Ir a Actividad 3</button>
            </div>
        </div>
    </div>
    
    <div *ngIf="isFullScreen" class="exit-message">
        <p>Para salir de pantalla completa, presiona la tecla **ESC**</p>
    </div>
</div>